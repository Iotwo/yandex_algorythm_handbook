(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{9367:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DrawerContent=void 0;let s=o(n(67294)),u=n(73851),a=n(97176);e.DrawerContent=({dragDisabled:t,visible:e,onClose:n=a.noop,onCloseEnd:i=a.noop,springValue:r,direction:o="bottom",maxSize:l,titleComponent:c,children:p,setSpringDisabled:h,setProgress:d,autoFocus:f=!1})=>{let g=(0,s.useRef)(null),[v,_]=(0,s.useState)(!1),m="bottom"===o?"y":"x",y="left"===o?-1:1,S=Math.max(r,0),b=function({axis:t,springValue:e,inverted:n}){return 1===e?null:"x"===t?`translate3d(${(1-e)*100*n}%,0,0)`:`translate3d(0,${(1-e)*100*n}%,0)`}({axis:m,springValue:r,inverted:y}),w=(0,s.useRef)(null);(0,s.useEffect)(()=>{var t;if(e&&f&&1===r){let e=(null==w?void 0:w.current)&&function(t){var e;for(let n of Array.from(t.querySelectorAll('a[href], button, input, select, textarea, [tabindex="0"]'))){let t=window.getComputedStyle(n),i="true"===n.getAttribute("aria-hidden")||(null==t?void 0:t.display)==="none",r=null!==n.closest('[aria-hidden="true"]'),o=null!==n.closest('[style*="display: none"]'),s=r||o,u=(null===(e=null==n?void 0:n.textContent)||void 0===e?void 0:e.trim())!=="";if(!i&&!s&&(u||(null==n?void 0:n.tagName)==="BUTTON"))return n}}(w.current);e?(e.focus(),document.body.classList.remove("utilityfocus"),document.body.classList.add("pointerfocus")):null===(t=w.current)||void 0===t||t.focus()}},[e,r]);let O=(0,s.useMemo)(()=>Object.assign(Object.assign({},b?{transform:b}:{}),l&&{["x"===m?"maxWidth":"maxHeight"]:l}),[b,l,m]);(0,s.useEffect)(()=>{v&&0===r&&(i(),_(!1))},[v,r,i]);let E=(0,s.useCallback)(()=>{_(!0),n()},[n]),{dragProps:T}=(0,a.useDrag)(n=>{if(!e||!g.current)return;let{velocity:{x:i,y:r},movement:{x:o,y:s},first:u,last:a,data:l,event:c}=n,p="x"===m?g.current.clientWidth:g.current.clientHeight,f=y*("x"===m?o:s),v=y*("x"===m?i:r);if(u?(l.isTargetUnderContent=g.current.contains(c.target),l.initialScrollPosition=g.current.scrollTop,l.isScrolled=0!==l.initialScrollPosition):l.isScrolled=l.isScrolled||l.initialScrollPosition-g.current.scrollTop<0,!t&&(!l.isTargetUnderContent||!l.isScrolled)){if(a)return(h(!1),Math.abs(v)>=.1)?v>0?E():d(1):f/p>=.3?E():d(1);if(f>0){h(!0);let t=Math.max(0,1-f/p);return 0===t?E():d(t)}}});return s.default.createElement("div",Object.assign({className:u.cnDrawerDragObserver},T),s.default.createElement("div",{className:u.cnDrawerOverlay,style:{opacity:S},onClick:()=>E()}),s.default.createElement("div",{className:u.cnDrawerCurtain,style:O,ref:w,tabIndex:-1,role:"dialog","aria-modal":1===r},s.default.createElement("div",{className:u.cnDrawerHandle,style:{opacity:S}}),c&&s.default.createElement("div",{className:u.cnDrawerTitle},c),s.default.createElement("div",{className:u.cnDrawerContent,ref:g},p)))}},73851:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cnDrawerDragObserver=e.cnDrawerCurtain=e.cnDrawerHandle=e.cnDrawerTitle=e.cnDrawerContent=e.cnDrawerOverlay=e.cnDrawer=void 0;let i=n(51386);e.cnDrawer=(0,i.cn)("Drawer"),e.cnDrawerOverlay=(0,e.cnDrawer)("Overlay"),e.cnDrawerContent=(0,e.cnDrawer)("Content"),e.cnDrawerTitle=(0,e.cnDrawer)("Title"),e.cnDrawerHandle=(0,e.cnDrawer)("Handle"),e.cnDrawerCurtain=(0,e.cnDrawer)("Curtain"),e.cnDrawerDragObserver=(0,e.cnDrawer)("DragObserver")},21495:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Drawer=void 0;let s=o(n(67294)),u=n(98930),a=n(33226),l=n(9367),c=n(73851),p=n(97176);n(37686);let h={dragImmediate:!1,disabled:!1,tension:230,friction:24};e.Drawer=t=>{let{onOpenEnd:e=p.noop,className:n,visible:i,nested:r,direction:o="bottom",innerRef:d,preventScrollDisabled:f,preventScrollOnClose:g,animation:v=h,ariaHidden:_,initSpringDisabled:m=!1}=t,[y,S]=(0,s.useState)(m?1:0),[b,w]=(0,s.useState)(!1),O=v.dragImmediate&&b||v.disabled,E=(0,p.useSpring)(y,v.tension,v.friction,O),T=E>0;(0,s.useEffect)(()=>{1===E&&e()},[E]);let P=(0,p.useClientHeight)(),M=(0,s.useMemo)(()=>({height:P&&P+"px"}),[P]),C=s.default.useMemo(()=>!f&&(g?T:i),[f,g,T,i]);return(0,u.usePreventScroll)({enabled:C}),(0,s.useEffect)(()=>{w(!1),S(i?1:0)},[i,v]),s.default.createElement(a.Popup,{className:(0,c.cnDrawer)({visible:T,direction:o,nested:r},[n]),visible:T,innerRef:d,style:M,keepMounted:t.keepMounted,zIndex:t.zIndex,scope:t.scope,"aria-hidden":_},s.default.createElement(l.DrawerContent,Object.assign({},t,{springValue:E,setProgress:S,setSpringDisabled:w})))},e.Drawer.displayName=(0,c.cnDrawer)()},97176:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(35629),e),r(n(93927),e),r(n(94808),e),r(n(21419),e)},35629:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=()=>void 0},21419:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useClientHeight=void 0;let i=n(67294),r=n(84927),o=n(45650),s=()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e.useClientHeight=()=>{let[t,e]=(0,i.useState)((0,o.canUseDOM)()?s():void 0),n=(0,i.useCallback)(()=>e(s()),[]);return(0,r.useIsomorphicLayoutEffect)(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[n]),t}},93927:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDrag=void 0;let i=n(67294),r=n(35629);e.useDrag=t=>{let e=(0,i.useRef)(),n=(0,i.useRef)(),o=(0,i.useRef)(),s=(0,i.useCallback)(t=>{if(!t.currentTarget.contains(t.target))return;let i=o.current||r.noop,s=n.current,u=Array.from(t.changedTouches).find(t=>t.identifier===e.current);s||"touchstart"!==t.type||1!==t.changedTouches.length||(u=t.changedTouches[0],e.current=null==u?void 0:u.identifier,n.current=s={first:!0,last:!1,startTime:t.timeStamp,initialPosition:{x:null==u?void 0:u.clientX,y:null==u?void 0:u.clientY},data:{}}),s&&u&&(s.event=t,"touchmove"===t.type&&(s.first=!1,s.previousPosition=s.currentPosition),("touchstart"===t.type||"touchmove"===t.type)&&(s.currentPosition={x:u.clientX,y:u.clientY},s.movement={x:s.currentPosition.x-s.initialPosition.x,y:s.currentPosition.y-s.initialPosition.y},s.delta={x:s.currentPosition.x-(s.previousPosition||s.initialPosition).x,y:s.currentPosition.y-(s.previousPosition||s.initialPosition).y},s.velocity={x:s.delta.x/(t.timeStamp-s.startTime-s.elapsedTime)||0,y:s.delta.y/(t.timeStamp-s.startTime-s.elapsedTime)||0},s.elapsedTime=t.timeStamp-s.startTime),("touchend"===t.type||"touchcancel"===t.type)&&(s.first=!1,s.last=!0,n.current=void 0,e.current=void 0),i(s))},[]);return o.current=t,{dragProps:{onTouchStart:s,onTouchMove:s,onTouchEnd:s,onTouchCancel:s}}}},94808:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSpring=void 0;let i=n(67294),r=n(78233);e.useSpring=(t,e,n,o)=>{let[s,u]=(0,i.useState)(null),[a,l]=(0,i.useState)(t),c=(0,i.useMemo)(()=>({onSpringUpdate:t=>{l(t.getCurrentValue())}}),[]),p=(0,i.useCallback)(()=>{s&&(s.removeListener(c),u(null))},[s,c]);return(0,i.useEffect)(()=>{if(o)p();else if(!s){let i=new r.SpringSystem().createSpring(e,n);i.setCurrentValue(t),u(i),l(t),i.addListener(c)}return p},[e,n,o,s,c,p]),(0,i.useEffect)(()=>{s&&s.setEndValue(t)},[s,t]),o?t:a}},24172:function(t,e,n){"use strict";e.dy=void 0;var i=n(21495);Object.defineProperty(e,"dy",{enumerable:!0,get:function(){return i.Drawer}}),n(73851)},98930:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(9329),e)},9329:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.usePreventScroll=void 0;let s=n(67294),u=o(n(98216)),a=n(84927);e.usePreventScroll=function(t){let{enabled:e,containerRef:n}=t,i=(0,s.useRef)(null),r=(0,s.useRef)(!1);(0,a.useIsomorphicLayoutEffect)(()=>{let t=n?n.current:null;i.current!==t&&(e&&r.current&&(u.unlock(i.current),u.lock(t)),i.current=t)}),(0,a.useIsomorphicLayoutEffect)(()=>{if(e)return r.current=!0,u.lock(i.current),()=>{r.current=!1,u.unlock(i.current)}},[e])}},66776:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=void 0,e.isIOS=function(){return"undefined"!=typeof window&&window.navigator&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1)}},70614:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.unlock=e.lock=void 0;let s=n(45650),u=n(66776),a=o(n(69997)),l=o(n(76193));function c(t){return t||document.body}e.lock=function(t){if(!(0,s.canUseDOM)())return;let e=c(t);a.lock(e),(0,u.isIOS)()&&l.lock(e)},e.unlock=function(t){if(!(0,s.canUseDOM)())return;let e=c(t);a.unlock(e),(0,u.isIOS)()&&l.unlock(e)}},69997:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unlock=e.lock=void 0;let i=n(12380),r=Math.random().toString(36).slice(2),o=`__scrollLockState$${r}`;e.lock=function(t){var e;let n=t[o];if(n){n.count++;return}let r=function(t){let e=(0,i.isRootHTMLElement)(t)&&window.innerWidth-document.documentElement.clientWidth>0,n=t.scrollHeight>t.clientHeight;return e||n||function(t){let{overflowY:e}=getComputedStyle(t);return/scroll/.test(e)}(t)?(0,i.getScrollBarGap)():0}(t),s=parseInt(getComputedStyle(t).getPropertyValue("padding-right"),10);e={initialStyle:(0,i.setStyle)(t,{paddingRight:`${s+r}px`,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}),count:1},t[o]=e},e.unlock=function(t){let e=t[o];e&&(e.count--,0===e.count)&&((0,i.setStyle)(t,e.initialStyle),delete t[o])}},76193:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unlock=e.lock=void 0;let i=n(12380),r=(0,i.isPassiveEventsSupported)()?{passive:!1}:void 0,o={count:0,lastX:0,lastY:0,scrollable:null,scrollX:0,scrollY:0};function s(t){t.changedTouches[0]&&(o.scrollable=(0,i.getScrollParent)(t.target),(0,i.isRootHTMLElement)(o.scrollable)||(o.lastX=t.changedTouches[0].pageX,o.lastY=t.changedTouches[0].pageY))}function u(t){let{scrollable:e,lastX:n,lastY:r}=o;if(t.changedTouches.length>1)return;if(!e||(0,i.isRootHTMLElement)(e)){t.preventDefault();return}if(!t.changedTouches[0])return;let s=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY,a=Math.abs(r-u)>Math.abs(n-s),l=e.scrollTop,c=e.scrollHeight-e.clientHeight,p=e.scrollLeft,h=e.scrollWidth-e.clientWidth,d=!a&&(p<=0&&s>n||p>=h&&s<n);(a&&(l<=0&&u>r||l>=c&&u<r)||d)&&t.preventDefault(),o.lastX=s,o.lastY=u}function a(){o.scrollable&&(o.scrollable=null)}e.lock=function(t){(0,i.isRootHTMLElement)(t)&&(o.count++,1===o.count&&(o.scrollX=window.pageXOffset,o.scrollY=window.pageYOffset,document.addEventListener("touchstart",s,r),document.addEventListener("touchmove",u,r),document.addEventListener("touchend",a,r)))},e.unlock=function(t){(0,i.isRootHTMLElement)(t)&&0!==o.count&&(o.count--,0===o.count&&(document.removeEventListener("touchstart",s),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",a),window.scrollTo(o.scrollX,o.scrollY)))}},98216:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(70614),e)},12380:function(t,e,n){"use strict";let i;Object.defineProperty(e,"__esModule",{value:!0}),e.isRootHTMLElement=e.isPassiveEventsSupported=e.getScrollBarGap=e.getScrollParent=e.setStyle=void 0;let r=n(45650);e.setStyle=function(t,e){let n={};for(let i in e)e.hasOwnProperty(i)&&(n[i]=t.style[i]);for(let n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return n},e.getScrollParent=function(t){for(;t&&!function(t){let e=getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}(t);)t=t.parentElement;return t||document.documentElement},e.getScrollBarGap=function(){if("undefined"==typeof document)return 0;if(void 0===i){let t=document.createElement("div");t.style.width="100%",t.style.height="200px";let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);let n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;n===r&&(r=e.clientWidth),document.body.removeChild(e),i=n-r}return i},e.isPassiveEventsSupported=function(){let t=!1;if(!(0,r.canUseDOM)())return!1;try{let e=()=>null;window.addEventListener("testPassive",e,{get passive(){t=!0;return}}),window.removeEventListener("testPassive",e)}catch(t){}return t},e.isRootHTMLElement=function(t){return t===document.body||t===document.documentElement}},37686:function(){},78233:function(t,e,n){var i,r=n(34155);i=function(){"use strict";var t=void 0;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t||void 0===r||"node"!==r.title||(t=setImmediate);var e=t=t||function(t){window.setTimeout(t,1e3/60)},n=Array.prototype.concat,i=Array.prototype.slice;function o(t){return e(t)}function s(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var u={};function a(t){if(u[t])return u[t];var e=t.replace("#","");3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var n=e.match(/.{2}/g);if(!n||n.length<3)throw Error("Expected a color string of format #rrggbb");var i={r:parseInt(n[0],16),g:parseInt(n[1],16),b:parseInt(n[2],16)};return u[t]=i,i}function l(t,e,n){var i=t.toString(16),r=e.toString(16),o=n.toString(16);return"#"+(i=i.length<2?"0"+i:i)+(r=r.length<2?"0"+r:r)+(o=o.length<2?"0"+o:o)}var c=Object.freeze({bind:function(t,e){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(){for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];t.apply(e,n.call(o,i.call(s)))}},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},onFrame:o,removeFirst:s,hexToRGB:a,rgbToHex:l});function p(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}var h=Object.freeze({mapValueInRange:p,interpolateColor:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],s=a(e),u=a(n),c=Math.floor(p(t,i,r,s.r,u.r)),h=Math.floor(p(t,i,r,s.g,u.g)),d=Math.floor(p(t,i,r,s.b,u.b));return o?"rgb("+c+","+h+","+d+")":l(c,h,d)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}});function d(t){return(t-30)*3.62+194}function f(t){return(t-8)*3+25}var g=Object.freeze({tensionFromOrigamiValue:d,origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:f,origamiFromFriction:function(t){return(t-25)/3+8}}),v=function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},m=function(){function t(){v(this,t),this.springSystem=null}return t.prototype.run=function(){var t=y.call(this);o(function(){t.loop(Date.now())})},t}();function y(){if(null==this.springSystem)throw Error("cannot run looper without a springSystem");return this.springSystem}var S=Object.freeze({AnimationLooper:m,SimulationLooper:function(){function t(e){v(this,t),this.springSystem=null,this.time=0,this.running=!1,this.timestep=e||16.667}return t.prototype.run=function(){var t=y.call(this);if(!this.running){for(this.running=!0;!t.getIsIdle();)t.loop(this.time+=this.timestep);this.running=!1}},t}(),SteppingSimulationLooper:function(){function t(){v(this,t),this.springSystem=null,this.time=0,this.running=!1}return t.prototype.run=function(){},t.prototype.step=function(t){y.call(this).loop(this.time+=t)},t}()}),b=function(){function t(e,n){v(this,t),this.bounciness=e,this.speed=n;var i=this.normalize(e/1.7,0,20);i=this.projectNormal(i,0,.8);var r=this.normalize(n/1.7,0,20);this.bouncyTension=this.projectNormal(r,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(i,this.b3Nobounce(this.bouncyTension),.01)}return t.prototype.normalize=function(t,e,n){return(t-e)/(n-e)},t.prototype.projectNormal=function(t,e,n){return e+t*(n-e)},t.prototype.linearInterpolation=function(t,e,n){return t*n+(1-t)*e},t.prototype.quadraticOutInterpolation=function(t,e,n){return this.linearInterpolation(2*t-t*t,e,n)},t.prototype.b3Friction1=function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},t.prototype.b3Friction2=function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},t.prototype.b3Friction3=function(t){return 45e-8*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},t.prototype.b3Nobounce=function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)},t}(),w=function(){function t(e,n){v(this,t),this.tension=e,this.friction=n}return t.fromOrigamiTensionAndFriction=function(e,n){return new t(d(e),f(n))},t.fromBouncinessAndSpeed=function(e,n){var i=new b(e,n);return t.fromOrigamiTensionAndFriction(i.bouncyTension,i.bouncyFriction)},t.coastingConfigWithOrigamiFriction=function(e){return new t(0,f(e))},t}();w.DEFAULT_ORIGAMI_SPRING_CONFIG=w.fromOrigamiTensionAndFriction(40,7);var O=function t(){v(this,t),this.position=0,this.velocity=0},E=function(){function t(e){v(this,t),this.listeners=[],this._startValue=0,this._currentState=new O,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new O,this._restSpeedThreshold=.001,this._tempState=new O,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+t._ID++,this._springSystem=e}return t.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.prototype.getId=function(){return this._id},t.prototype.setSpringConfig=function(t){return this._springConfig=t,this},t.prototype.getSpringConfig=function(){return this._springConfig},t.prototype.setCurrentValue=function(t,e){return this._startValue=t,this._currentState.position=t,e||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},t.prototype.getStartValue=function(){return this._startValue},t.prototype.getCurrentValue=function(){return this._currentState.position},t.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},t.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},t.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e].onSpringEndStateChange;i&&i(this)}return this},t.prototype.getEndValue=function(){return this._endValue},t.prototype.setVelocity=function(t){return t===this._currentState.velocity||(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId())),this},t.prototype.getVelocity=function(){return this._currentState.velocity},t.prototype.setRestSpeedThreshold=function(t){return this._restSpeedThreshold=t,this},t.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},t.prototype.setRestDisplacementThreshold=function(t){this._displacementFromRestThreshold=t},t.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},t.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},t.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},t.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},t.prototype.advance=function(e,n){var i=this.isAtRest();if(!i||!this._wasAtRest){var r=n;n>t.MAX_DELTA_TIME_SEC&&(r=t.MAX_DELTA_TIME_SEC),this._timeAccumulator+=r;for(var o=this._springConfig.tension,s=this._springConfig.friction,u=this._currentState.position,a=this._currentState.velocity,l=this._tempState.position,c=this._tempState.velocity,p=void 0,h=void 0,d=void 0,f=void 0,g=void 0,v=void 0,_=void 0,m=void 0,y=void 0,S=void 0;this._timeAccumulator>=t.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=t.SOLVER_TIMESTEP_SEC,this._timeAccumulator<t.SOLVER_TIMESTEP_SEC&&(this._previousState.position=u,this._previousState.velocity=a),p=a,h=o*(this._endValue-l)-s*a,l=u+p*t.SOLVER_TIMESTEP_SEC*.5,d=c=a+h*t.SOLVER_TIMESTEP_SEC*.5,f=o*(this._endValue-l)-s*c,l=u+d*t.SOLVER_TIMESTEP_SEC*.5,g=c=a+f*t.SOLVER_TIMESTEP_SEC*.5,v=o*(this._endValue-l)-s*c,l=u+g*t.SOLVER_TIMESTEP_SEC,_=c=a+v*t.SOLVER_TIMESTEP_SEC,m=o*(this._endValue-l)-s*c,y=1/6*(p+2*(d+g)+_),S=1/6*(h+2*(f+v)+m),u+=y*t.SOLVER_TIMESTEP_SEC,a+=S*t.SOLVER_TIMESTEP_SEC;this._tempState.position=l,this._tempState.velocity=c,this._currentState.position=u,this._currentState.velocity=a,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/t.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),i=!0);var b=!1;this._wasAtRest&&(this._wasAtRest=!1,b=!0);var w=!1;i&&(this._wasAtRest=!0,w=!0),this.notifyPositionUpdated(b,w)}},t.prototype.notifyPositionUpdated=function(t,e){for(var n=0,i=this.listeners.length;n<i;n++){var r=this.listeners[n];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),e&&r.onSpringAtRest&&r.onSpringAtRest(this)}},t.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.prototype.wasAtRest=function(){return this._wasAtRest},t.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},t.prototype.getListeners=function(){return this.listeners},t.prototype.addListener=function(t){return this.listeners.push(t),this},t.prototype.removeListener=function(t){return s(this.listeners,t),this},t.prototype.removeAllListeners=function(){return this.listeners=[],this},t.prototype.currentValueIsApproximately=function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()},t}();E._ID=0,E.MAX_DELTA_TIME_SEC=.064,E.SOLVER_TIMESTEP_SEC=.001;var T=function(){function t(e){v(this,t),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=e||new m,this.looper.springSystem=this}return t.prototype.setLooper=function(t){this.looper=t,t.springSystem=this},t.prototype.createSpring=function(t,e){var n=void 0;return n=void 0===t||void 0===e?w.DEFAULT_ORIGAMI_SPRING_CONFIG:w.fromOrigamiTensionAndFriction(t,e),this.createSpringWithConfig(n)},t.prototype.createSpringWithBouncinessAndSpeed=function(t,e){var n=void 0;return n=void 0===t||void 0===e?w.DEFAULT_ORIGAMI_SPRING_CONFIG:w.fromBouncinessAndSpeed(t,e),this.createSpringWithConfig(n)},t.prototype.createSpringWithConfig=function(t){var e=new E(this);return this.registerSpring(e),e.setSpringConfig(t),e},t.prototype.getIsIdle=function(){return this._isIdle},t.prototype.getSpringById=function(t){return this._springRegistry[t]},t.prototype.getAllSprings=function(){var t=[];for(var e in this._springRegistry)this._springRegistry.hasOwnProperty(e)&&t.push(this._springRegistry[e]);return t},t.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},t.prototype.deregisterSpring=function(t){s(this._activeSprings,t),delete this._springRegistry[t.getId()]},t.prototype.advance=function(t,e){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var n=0,i=this._activeSprings.length;n<i;n++){var r=this._activeSprings[n];r.systemShouldAdvance()?r.advance(t/1e3,e/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(r))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},t.prototype.loop=function(t){var e=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var n=t-this._lastTimeMillis;this._lastTimeMillis=t;var i=0,r=this.listeners.length;for(i=0;i<r;i++)(e=this.listeners[i]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),i=0;i<r;i++)(e=this.listeners[i]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){s(this.listeners,t)},t.prototype.removeAllListeners=function(){this.listeners=[]},t}();return _({},S,{OrigamiValueConverter:g,MathUtil:h,Spring:E,SpringConfig:w,SpringSystem:T,util:_({},c,h)})},t.exports=i()}}]);